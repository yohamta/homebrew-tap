# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Dagu < Formula
  desc "A No-code workflow executor that runs DAGs defined in a simple YAML format"
  homepage "https://github.com/dagu-dev/dagu"
  version "1.14.1"
  license "GNU General Public License v3.0"

  on_macos do
    on_intel do
      url "https://github.com/dagu-dev/dagu/releases/download/v1.14.1/dagu_1.14.1_darwin_amd64.tar.gz"
      sha256 "8098b0e466c4779dd63bbf7e68eaf52fb8215f5c3770245f4d8973b6173d865f"

      def install
        bin.install "dagu"
      end
    end
    on_arm do
      url "https://github.com/dagu-dev/dagu/releases/download/v1.14.1/dagu_1.14.1_darwin_arm64.tar.gz"
      sha256 "070347cb1a39fd4b633164e97e24f2133ef5762ab5b531eedffc981224513126"

      def install
        bin.install "dagu"
      end
    end
  end

  on_linux do
    on_intel do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/dagu-dev/dagu/releases/download/v1.14.1/dagu_1.14.1_linux_amd64.tar.gz"
        sha256 "7a112e68bf770f754dbc7efb026c18effc74845e6963d04a7c6bcd345f764733"

        def install
          bin.install "dagu"
        end
      end
    end
    on_arm do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/dagu-dev/dagu/releases/download/v1.14.1/dagu_1.14.1_linux_arm64.tar.gz"
        sha256 "1a0310d0e1a8a4650a6fba07c6b1cbced39ea01ca009f4551e78047f26e18590"

        def install
          bin.install "dagu"
        end
      end
    end
  end

  service do
    run [opt_bin/"dagu", "start-all"]
    keep_alive true
    error_log_path var/"log/dagu.log"
    log_path var/"log/dagu.log"
    working_dir var
  end
end
